#Jiaqi Gao
#SoftDev Pd08
#HW03

from flask import Flask, render_template
from collections import OrderedDict 
app = Flask(__name__)

from Occupations import whichOcc

############################################
#creating dictionary for occupations
data = open("static/occupationslinks.csv").read()
data = data.replace(', ', '+')
data = data.replace(',', '\n').split('\n')
for x in range(0, len(data)):
    data[x] = data[x].replace('+', ', ')
data = data[2:len(data)-2]
occ = []
per = []
<<<<<<< HEAD:HW03-occu_table/app.py~
links = []
while len(data) > 2:
    occ.append(data[0])
    per.append(data[1])
    links.append(data[2])
    data = data[3:]
    
print(occ)
=======
while len(data) > 1:
    occ.append(data[0])
    per.append(data[1])
    data = data[2:]
occ = occ[:len(occ)-1]
per = per[:len(per)-1]
>>>>>>> 658afe7aeb7b301f43c3912a1aa10463a613e0f6:HW03/app.py
dic = OrderedDict()#dictionary with occupations
count = 0
for i in occ:
    dic.setdefault(i, [])
    dic[i].append(per[count])
    dic[i].append(links[count])
    count += 1
##########################################
@app.route("/")
def index():
	return '''<a href="http://127.0.0.1:5000">Hello </a>
        <a href="/Occupations"> CLICK ME </a>
        <a href="/end"> End </a>'''

##########################################
@app.route("/")
def index():
	return '''<a href="http://127.0.0.1:5000">Hello </a>
        <a href="/Occupations"> CLICK ME </a>
        <a href="/end"> End </a>'''

@app.route("/Occupations")
def start():
	return render_template("app.html", dic=dic, random_job=whichOcc())


@app.route("/end")
def end():
        return '''<a href="http://127.0.0.1:5000">Hello </a>
        <a href="/Occupations"> CLICK ME </a>
        <a href="/end"> End </a>'''

if __name__ == "__main__":
    app.debug = True
    app.run()
